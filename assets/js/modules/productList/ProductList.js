!function(t,e,i,a){function r(e,i){this.el=e,this.$el=t(e),this.opt=t.extend({},o,i),this._defaults=o,this._name=n,this.init()}var n="product",o={el:{priceWrapper:'[data-el="priceWrapper"]',price:'[data-el="price"]',article:"[data-article]",links:"[data-links]",sizeWrapper:"[data-sizing]",quickViewTrigger:'[data-el="quickViewTrigger"]',goArticleTrigger:'[data-el="goArticleTrigger"]',carousel:'[data-el="carousel"]',carouselThumbnail:'[data-el="carouselThumbnail"]'},currency:"€",currencyPlace:"between",events:{changed:"article.changed",updated:"update.data"},product:void 0,currentIndex:0};r.prototype={init:function(){var e=this;e.Plugin_QuickView=t(e.opt.quickView.el).data("plugin_"+e.opt.quickView.plugName),e.id=e.$el.data("product"),e.current=t(e.opt.el.article,e.$el).eq(e.opt.currentIndex).data("article"),e.defineEls(),e.bindEvents(),e.initPlugins(),e.getArticlesFlags(),e.pending=e.opt.utils.pending(e.$priceWrapper),e.pending.trigger(!0)},defineEls:function(){var e=this;e.$price=t(e.opt.el.price,e.$el),e.$priceWrapper=t(e.opt.el.priceWrapper,e.$el),e.$links=t(e.opt.el.links,e.$el),e.$quickViewTrigger=t(e.opt.el.quickViewTrigger,e.$el),e.$goArticleTrigger=t(e.opt.el.goArticleTrigger,e.$el),e.$carousel=t(e.opt.el.carousel,e.$el),e.$thumbnail=t(e.opt.el.carouselThumbnail,e.$el),e.$thumbnailClone=t(e.opt.el.carouselThumbnail,e.$el).clone()},bindEvents:function(){var t=this;t.$el.on(t.opt.events.changed,function(e,i){t.current=i,t.productChanged()}),t.$el.on(t.opt.events.updated,function(e,i){t.updateData(i)}),t.$quickViewTrigger.on("click",function(){t.openQuickview()}),t.$goArticleTrigger.on("click",function(){t.goArticle()})},initPlugins:function(){var e=this;e.$carousel.owlCarousel({dots:!1,items:1}).on("changed.owl.carousel",function(i){var a=t(".owl-item",t(this)).eq(i.item.index).find("[data-article]").data("article");e.$el.trigger(e.opt.events.changed,a,"scroll"),e.thumbnailsTraking(a),t("[data-hash]",e.$thumbnail).removeClass("current-item").eq(i.item.index).addClass("current-item"),e.opt.currentIndex=i.item.index}),e.$thumbnail.thumbnail({carousel:e.$carousel})},thumbnailsTraking:function(t){this.opt.tags.triggerDtmFn("siteInteraction",{events:{click:!0,productClick:!0},interaction:{type:"pl-product-interaction",name:"color-view"},products:[{modelNumber:t,sku:"L"+t+"00"}]})},goArticle:function(){var t=this;e.location.hash=t.id,e.location.href=e.location,e.location.href=t.$links.attr("href")},goArticleInQuickview:function(){var t=this;e.location.hash=t.id,e.location.href=e.location,e.location.href=t.$links.attr("href")},openQuickview:function(){var t=this;t.Plugin_QuickView.triggered({title:t.$el.data("title")?t.$el.data("title").trim():"",sport:t.$el.data("sport")?t.$el.data("sport").trim():"",claim:t.$el.data("claim")?t.$el.data("claim").trim():"",ski:"ski"===t.$el.data("ski"),thumbnail:t.$thumbnailClone,index:t.opt.currentIndex,articles:!!t.opt.product&&t.opt.product.articles,article:!!t.opt.product&&t.opt.product.articles[t.current],flags:t.articlesFlags,current:t.current,productId:t.id,productURL:t.$links.attr("href"),salable:t.opt.product?t.opt.product.salable:void 0,notSalableText:!(!t.opt.product||t.opt.product.salable)&&t.opt.notSalableText})},productChanged:function(){var t=this;t.$links.length&&t.updateLinks(),t.opt.product&&t.updatePrice()},productIsNotSalable:function(){var t=this;t.opt.utils.addPrice(t.$priceWrapper,{notSalable:!0,notSalableText:t.opt.notSalableText})},updateLinks:function(){var e=this;e.$links.each(function(){var i=t(this).attr("href");i=i.slice("=",-(i.length-i.indexOf("=")-1)).concat(e.current),t(this).attr("href",i)})},updatePrice:function(t){var e=this,i=e.opt.product.articles[e.current];void 0!==e.opt.product.customer_group?e.opt.utils.addPrice(e.$priceWrapper,i):e.opt.product.salable&&i&&e.opt.utils.addPrice(e.$priceWrapper,i)},updateData:function(t){var e=this;e.opt.product=t,e.Plugin_QuickView&&e.Plugin_QuickView.state&&e.Plugin_QuickView.product.current===e.current&&e.Plugin_QuickView.updateData({articles:!!e.opt.product&&e.opt.product.articles,salable:e.opt.product?e.opt.product.salable:void 0,notSalableText:!(!e.opt.product||e.opt.product.salable)&&e.opt.notSalableText}),void 0!==e.opt.product.customer_group?e.opt.magento.isProductSalable(e.opt.product)?e.updatePrice(t):e.productIsNotSalable():e.opt.product.salable&&e.opt.ecom?e.updatePrice(t):e.productIsNotSalable(),e.pending.trigger(!1)},getArticlesFlags:function(){var e=this;e.articlesFlags={},e.$el.find("[data-article]").each(function(){e.articlesFlags[t(this).data("article")]=t(this).find('[data-el="flags"]').html()})}},t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))})}}(jQuery,window,document),function(t,e,i,a){function r(e,i){this.el=e,this.$el=t(this.el),this.opt=t.extend({},o,i),this._defaults=o,this._name=n,this.init()}var n="quickview",o={root:"body",trigger:".quickview-btn",target:".quickview",toggleClass:"active",close:".quickview-close, .quickview-overlay",content:".quickview-content",thumbnails:".quickview-thumbnails",title:'[data-el="title"]',sport:'[data-el="sport"]',sizeWrapper:'[data-el="sizeWrapper"]',price:'[data-el="price"]',priceWrapper:'[data-el="priceWrapper"]',link:'[data-el="link"]',claim:'[data-el="claim"]',sample:'[data-el="sample"]',flags:'[data-el="flags"]'};r.prototype={init:function(){var t=this;t.state=!1,t.product=!1,t.current=!1,t.defineEls(),t.bindEvents(),t.pending=t.opt.utils.pending(t.$content),t.pendingPrice=t.opt.utils.pending(t.$priceWrapper),t.pendingSize=t.opt.utils.pending(t.$sizeWrapper)},defineEls:function(){var e=this;e.$root=t(e.opt.root),e.$content=t(e.opt.content,e.$el),e.$close=t(e.opt.close,e.$el),e.$thumbnails=t(e.opt.thumbnails,e.$el),e.$title=t(e.opt.title,e.$el),e.$sport=t(e.opt.sport,e.$el),e.$price=t(e.opt.price,e.$el),e.$link=t(e.opt.link,e.$el),e.$flags=t(e.opt.flags,e.$el),e.$claim=t(e.opt.claim,e.$el),e.$sample=t(e.opt.sample,e.$el),e.$sizeWrapper=t(e.opt.sizeWrapper,e.$el),e.$priceWrapper=t(e.opt.priceWrapper,e.$el)},bindEvents:function(){var i=this;i.$close.on("click",function(t){t.preventDefault(),i.close()}),i.$link.on("click",function(t){var a=i.product.productURL,r=a.substr(a.lastIndexOf("=")+1),n=a.replace(r,i.product.current);e.location.hash=i.product.productId,e.location.href=e.location,e.location.href=n}),i.$thumbnails.on("click","[data-article-code]",function(){var e=t(this).data("article-code");t("[data-article-code]",i.$thumbnails).removeClass("current-item"),i.opt.tags.triggerDtmFn("siteInteration",{events:{click:!0},interaction:{type:"pl-quickview-interaction",name:"color-view"},products:[{modelNumber:e,sku:"L"+e+"00"}]}),t(this).addClass("current-item"),i.update(i.product.articles[e],e)})},triggered:function(t){var e=this;e.state||(e.open(),e.state=!0),e.product=t.productId,e.build(t)},updateData:function(e){var i=this;t.extend(!0,i.product,e),i.update(i.product.articles[i.product.current],i.product.current)},open:function(){var t=this;t.$el.toggleClass(t.opt.toggleClass),t.$root.addClass("overflow-hidden")},close:function(){var t=this;t.$el.toggleClass(t.opt.toggleClass),t.$root.removeClass("overflow-hidden"),t.opt.tags.triggerDtmFn("siteInteration",{type:"pl-quick-view-interaction",name:"close",modelNumber:t.product.current}),t.state=!1,t.product=!1},build:function(t){var e=this;e.pending.trigger(!0),e.clear(),e.product=t,t.title&&e.buildHead(t.title,t.sport),t.article&&t.salable&&e.buildPrice(t.article),t.article&&!t.salable&&e.buildNotSalable(t.notSalableText),t.thumbnail&&e.buildThumbnail(t.thumbnail,t.index),t.current&&e.buildSample(t.current.toString()),t.flags&&e.buildFlags(t.flags[t.current]),t.claim&&e.buildClaim(t.claim),t.article&&e.buildSizes(t.article.taille||t.article.sizes),e.buildLink(t.productURL,t.current.toString()),t.article||(e.pendingPrice.trigger(!0),e.pendingSize.trigger(!0)),e.pending.trigger(!1)},update:function(t,e){var i=this;i.product.current=e,i.pendingPrice.trigger(!0),i.pendingSize.trigger(!0),i.product.salable&&i.buildPrice(t),t&&i.buildSizes(t.taille||t.sizes),i.buildLink(i.product.productURL,e),i.buildSample(e),i.product.flags&&i.product.current&&i.buildFlags(i.product.flags[i.product.current]),i.pendingPrice.trigger(!1),i.pendingSize.trigger(!1),i.opt.tags.triggerDtmFn("siteInteration",{events:{click:!0},interaction:{type:"pl-quickview-interaction",name:"color-view"},products:[{modelNumber:e,sku:"L"+e+"00"}]})},clear:function(){var t=this;t.$thumbnails.trigger("destroy.owl.carousel").empty(),t.product=!1},buildHead:function(t,e){var i=this;i.$title.html(t),i.$sport.html(e)},buildPrice:function(t){var e=this;e.opt.utils.addPrice(e.$el,t)},buildNotSalable:function(t){var e=this;e.opt.utils.addPrice(e.$el,{notSalable:!0,notSalableText:t})},buildSample:function(t){var e=this;e.$sample.attr("src",e.$sample.data("src").replace("{sku}",e.opt.utils.formatCodeSap(t)+(e.product.ski?"_1":"")))},buildFlags:function(t){this.$flags.empty().append(t)},buildClaim:function(t){this.$claim.html(t)},buildThumbnail:function(t,e){var i=this;i.formatThumbnail(t,e),i.$thumbnails.append(t.html()).owlCarousel({nav:t.find("> div").length>5,navText:['<div class="icon-slide-left"></div>','<div class="icon-slide-right"></div>'],dots:!1,items:5,margin:5,mouseDrag:!1,startPosition:e})},buildSizes:function(t){var e=this;e.opt.utils.addSizes(e.$sizeWrapper,t)},buildLink:function(t,e){},formatThumbnail:function(e,i){t("[data-article-code]",e).removeClass("current-item").eq(i).addClass("current-item")}},t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))})}}(jQuery,window,document),function(t,e,i,a){function r(e,i){this.el=e,this.$el=t(this.el),this.opt=t.extend({},o,i),this._defaults=o,this._name=n,this.init()}var n="seeMore",o={trigger:".quickview-btn",target:".quickview",toggleClass:"active",close:".quickview-close",carousel:".quickview-carousel",thumbnails:".quickview-thumbnails",title:".quickview-infos h2",sport:'[data-el="sport"]',sizeWrapper:'[data-el="sizeWrapper"]',price:'[data-el="price"]',link:'[data-el="link"]'};r.prototype={init:function(){var t=this;t.callNb=0,t.defineEls(),t.bindEvents(),t.pending=t.opt.utils.pending(t.$el)},defineEls:function(){var e=this;e.$number=t(".number",e.$el)},bindEvents:function(){var t=this;t.$el.on("click",function(e){e.preventDefault(),t.loadProduct()})},loadProduct:function(){var e=this;e.pending.trigger(!0),e.opt.module.seeMore(e.opt.currentPage+1).done(function(i){e.build(i.html,i.salableDispo),e.sendData(i.salableDispo),e.pagination(i.pagination),e.pending.trigger(!1),t(".bazaarvoice--container").length&&e.loadBazaarVoice(i.salableDispo)})},pagination:function(t){var e=this;t.currentPage===t.lastPage&&e.destroy(),e.opt.currentPage=t.currentPage,e.$number.html(t.remainingProducts)},build:function(e,i){var a=this;t(e.trim()).each(function(e,i){if(0===e&&!t(i).hasClass("grid-category"))return void a.$el.prev().append(t(i).html());a.$el.before(t(i))}),a.opt.module.addProducts(i)},sendData:function(t){this.opt.module.sendProductData(t)},destroy:function(){this.$el.remove()},parseArticleForBazaar:function(e){var i={};return t.each(e,function(e,a){var r=t("div").find("[data-product='"+e+"']"),n=t(r).data("url");t.each(a.articles,function(t,e){i[e.ref]={url:n}})}),i},loadBazaarVoice:function(t){var e=this;$BV.ui("rr","inline_ratings",{productIds:e.parseArticleForBazaar(t),containerPrefix:"BVRRInlineRating"})}},t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))})}}(jQuery,window,document),define("productList/plugins/jProductList",["jquery","owl"],function(){}),define("productList/ProductList",["salomon/SalomonMagento","salomon/SalomonSymfony","salomon/SalomonUtils","salomon/SalomonTags","salomon/SalomonCookie","jquery","module","productList/plugins/jProductList"],function(t,e,i,a,r,n,o){function l(t){n('[data-plugin="quickview"]').quickview({utils:i,tags:a});var e=n('[data-plugin="seeMore"]');e.length&&e.seeMore({module:d,currentPage:1,utils:i,tags:a}),c(n('[data-el="product-list"]')),d.addProducts(t)}function c(t){t.on("click",'[data-el="merch-link"]',function(e){var i=n(this).data("json"),r=t.find(".item"),o=n(this).closest(".item");i.position=r.index(o),a.triggerDtmFn("siteLink",i)})}function u(e,i){var a=[],r={};n.each(e,function(o,l){var c=Object.keys(l.articles).length;if(!t.isProductSalable(l))return void d.pluginLoadPrices([l]);c+a.length>i&&(s(r,a,e),a=[],r={}),n.each(l.articles,function(t,e){if(e.sku){var i=0;void 0!=e.taille?e.taille.forEach(function(t){t.quantity>0&&(i=t.sku)}):void 0!=e.sizes&&e.sizes.forEach(function(t){t.quantity>0&&(i=t.sku)}),0==i&&(i=e.sku),a.push(i),r[i]={id:o,ref:e.ref}}})}),a.length>0&&s(r,a,e)}function s(e,i,a){return console.log(i),t.getProductPrice(i).done(function(t){var i={};n.each(t,function(t,r){var o=e[r.sku];if(o){var l=o.id,c=o.ref;if(i[l])n.extend(!0,i[l].articles[c],r);else{var u=a[o.id];n.extend(!0,u.articles[c],r),i[l]=u}}}),d.pluginLoadPrices(i)})}var d={},p={pageSubProducts:"",pageRefs:"",pageProductIds:{},currency:"€",currencyPlace:"",productAPI:{salable:"/scripts/salable.aspx",disponibility:"/scripts/nocache/getProductDispos.aspx",price:""},products:{},forSale:!1};return d.pluginLoadPrices=function(t){n.each(t,function(t,e){n('[data-product="'+e.id+'"]').trigger("update.data",e)})},d.sendProductData=function(e,a,r){t.getCustomerGroup().done(function(t){"ECOM"!=t||p.forSale||"br"===i.sCodeFiliale||"jp"===i.sCodeFiliale||"us"===i.sCodeFiliale?d.sendProductDataForAlgolia(e,a,r):d.pluginLoadPrices(e)})},d.sendProductDataForAlgolia=function(t,e,i){i?(clearTimeout(d.deferLoadMagentPrice),d.deferLoadMagentPrice=setTimeout(function(){window.location.hash&&"undefined"!==window.location.hash&&(window.location.href=window.location),u(t,e||p.productPriceRange)},i)):(window.location.hash&&"undefined"!==window.location.hash&&(window.location.href=window.location),u(t,e||p.productPriceRange))},d.getProductSalable=function(t){return e.getProductSalable(t,p.range).then(function(t){return t.root.product})},d.getProductDispo=function(t,i){return e.getProductDispo(t,i).then(function(t){return t.root.article})},d.addProducts=function(e,r){n.each(e,function(e,o){n("[data-product='"+e+"']").product({currency:p.currency,currencyPlace:p.currencyPlace,notSalableText:p.notSalableText,utils:i,tags:a,magento:t,quickView:{el:'[data-plugin="quickview"]',plugName:"quickview"},ecom:t.getMagentoBusiness().b2x,prefix:r||!1})})},d.seeMore=function(t){return e.callSymfony({url:document.location.href,dataType:"json",method:"GET",data:{ajax:"",page:t}})},function(){return n.extend(!0,p,o.config()),n(document).ready(function(){l(p.products)}),d.sendProductData(p.products),d}()});